import{j as e,a as p,B,b as I,i as L,d as F,r as o,t as b,u as D,n as S,c as E,z as P,w as A,p as z,H as M,Q as U,W as j,R as _,F as $,T as V,e as H,f as Z}from"./vendor.9a927ba6.js";const q=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const x of s.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&i(x)}).observe(document,{childList:!0,subtree:!0});function c(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=c(r);fetch(r.href,s)}};q();function O({expandState:t,setExpandedState:a}){function c(){a(i=>!i)}return e("button",{onClick:c,className:`transition-all duration-500 right-3 z-10 fixed top-3 delay-200  text-4xl bg-blue-400 text-white rounded-full ${t?" opacity-20":""}`,children:t?p("span",{"aria-label":"retract dropdown",children:[e(B,{})," "]}):p("span",{"aria-label":"add new task",className:"",children:[e(I,{})," "]})})}const Q={apiKey:"AIzaSyCdZiImMZnQzTe4FTrp_XQ1ZwiuWZU6-Vw",authDomain:"task-tracker-9fc69.firebaseapp.com",projectId:"task-tracker-9fc69",storageBucket:"task-tracker-9fc69.appspot.com",messagingSenderId:"1071787334960",appId:"1:1071787334960:web:f8d0cd33186f769d44fcf5",measurementId:"G-NRJRZT9S5J"},W=L(Q),w=F(W);function K({expandState:t,setExpandState:a}){const c=o.exports.useRef(),i=o.exports.useRef(),r=o.exports.useRef(),s=o.exports.useRef();function x(g){return new Date(g)}async function y(g){g.preventDefault();const h=c.current.value,d=i.current.value,T=r.current.value;if(!h){b.error("Enter a Task",{position:b.POSITION.BOTTOM_CENTER,hideProgressBar:!0});return}if(!d){b.error("Enter Assigned to",{position:b.POSITION.BOTTOM_CENTER,hideProgressBar:!0});return}if(!T){b.error("Enter a valid date",{position:b.POSITION.BOTTOM_CENTER,hideProgressBar:!0});return}let u=x(T);const m={dateCreated:D.now(),task:h,assigned:d,date:D.fromDate(u)};try{const f=S(w,"users"),n=E(f,"user1"),l=S(n,"tasks");await P(l,m),b.success("Successfully added",{position:b.POSITION.BOTTOM_CENTER,hideProgressBar:!0,collapseDuration:100})}catch(f){console.log(f)}c.current.value="",i.current.value="",r.current.value="",a()}return o.exports.useEffect(()=>{function g(d){s.current&&!s.current.contains(d.target)&&a(!1)}function h(d){d.keycode===27&&(a(!1),console.log("Key Presses"))}return document.addEventListener("mousedown",g),document.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",g),document.removeEventListener("keydown",h)}},[s]),e("div",{ref:s,className:`z-10 w-full lg:w-1/2 xl:w-1/3 bg-white left-1/2 -translate-x-1/2 lg:mx-auto fixed transition-all p-3 ${t?"shadow-md":"-translate-y-full"}`,children:p("form",{className:"flex flex-col gap-2 ",onSubmit:y,children:[e("label",{htmlFor:"task-input",children:"Enter Task"}),e("input",{id:"task-input",placeholder:"Enter task name",className:"p-2 shadow-md",type:"text",ref:c}),e("label",{htmlFor:"assigned-to",children:"Assigned To"}),e("input",{id:"assigned-to",type:"text",placeholder:"Assigned To",className:"p-2 shadow-md",ref:i}),p("div",{children:[e("label",{htmlFor:"date",children:"Next follow up date: "}),e("input",{ref:r,type:"date",className:"p-2 border"})]}),e("button",{className:"bg-blue-400 mb-1 w-min mx-auto px-2 py-1 rounded-lg text-white font-semibold",children:"ADD"}),t&&e(O,{expandState:t,setExpandedState:a})]})})}const C=o.exports.createContext();function k(){return o.exports.useContext(C)}const J=({children:t})=>{const[a,c]=o.exports.useState(null),[i,r]=o.exports.useState(!1),[s,x]=o.exports.useState(null),y=o.exports.useMemo(()=>g(s),[s,x]);o.exports.useEffect(()=>{const u=S(w,"users","user1","tasks");A(u,z("date","desc")),M(u,m=>{x(m.docs.map(f=>({id:f.id,data:f.data()})))})},[]);function g(u){function m(n){const l=new Date;l.setHours(0,0,0,0);const v=new Date;return v.setHours(0,0,0,0),v.setDate(l.getDate()+1),n>=l&&n<v?"today":n<l?"past":"upcoming"}const f=[[],[],[]];return u==null||u.forEach(n=>{var v,R;const l=m((R=(v=n==null?void 0:n.data)==null?void 0:v.date)==null?void 0:R.toDate());l==="today"?f[0].push(n):l==="past"?f[1].push(n):f[2].push(n)}),f}const h=async u=>{if(!!a&&u!==a.data.date)try{const m=E(w,"users","user1","tasks",a.id);await U(m,{date:D.fromDate(new Date(u))})}catch(m){console.log(m)}};async function d(u){const m=E(w,"users","user1","tasks",u);try{await j(m)}catch(f){console.log(f)}}const T={selectedTask:a,setExpandedState:r,setSelectedTask:c,expandedState:i,tasks:s,setTasks:x,updateDate:h,queriedTasks:y,deleteDocument:d};return e(C.Provider,{value:T,children:t})};function G({task:t,color:a="green-500"}){const[c,i]=o.exports.useState(!1),{updateDate:r,setSelectedTask:s,deleteDocument:x}=k(),[y,g]=o.exports.useState(!1),h=o.exports.useRef(),d=o.exports.useRef(),T=t==null?void 0:t.data.dateCreated.toDate(),u=t==null?void 0:t.data.date.toDate();function m(n){return`${n.getDate()} / ${n.getMonth()+1} / ${n.getFullYear()}`}function f(){var n;if(s(t),c){const l=(n=h==null?void 0:h.current)==null?void 0:n.value;l&&r(l)}i(l=>!l)}return o.exports.useEffect(()=>{function n(l){d.current&&!d.current.contains(l.target)&&i(!1)}return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[d]),o.exports.useLayoutEffect(()=>{d.current.classList.add("bg-"+a)},[]),p("div",{onClick:n=>{g(l=>{if(!d.current.contains(n.target))return!l})},className:"w-full my-1  bg-white",children:[p("div",{className:"shadow-md p-2 border rounded",children:[p("div",{className:"flex gap-1 justify-between",children:[e("div",{className:"md:text-2xl text-xl  text-slate-800",children:t==null?void 0:t.data.task}),p("div",{ref:d,className:"transition-all cursor-pointer text-white font-bold p-3 text-md text-center rounded ",children:[e("button",{onClick:f,className:"mb-1 font-bold border px-2 py-1 rounded",children:c?"Finalize Update":"Update"}),e("br",{}),c?e("input",{className:"text-slate-800",ref:h,type:"date"}):m(u)]})]}),p("div",{className:"flex items-end justify-between mt-1",children:[p("div",{children:["Assigned To:",e("br",{}),t==null?void 0:t.data.assigned]}),e("div",{children:p("span",{className:"text-md text-gray-500",children:["Created at: ",m(T)]})})]})]}),e("div",{className:`w-full px-4 py-2 text-red-600 bg-blue-200 bg-opacity-25 flex justify-center duration-1000 ${y?"opacity-100 translate-y-0":"opacity-0 -translate-y-full"}`,onClick:()=>{x(t.id)},children:e(_,{})})]})}function X(){const{queriedTasks:t,tasks:a}=k();return p("div",{className:"",children:[e("div",{className:"fixed shadow-md top-0 p-3 bg-green-100  w-full",children:e("div",{className:"font-bold text-3xl text-blue-400",children:"Tasks"})}),p("div",{className:"pt-16 px-2",children:[e(N,{i:0,color:"emerald-600",text:"Today",zeroLenText:"No follow ups today swalla \u{1F389}",queriedTasks:t}),e("hr",{className:"my-2"}),e(N,{i:1,color:"orange-500",text:"Previous",zeroLenText:"No Backlog \u{1F389}",queriedTasks:t}),e("hr",{className:"my-2"}),e(N,{i:2,color:"blue-500",text:"Upcoming",zeroLenText:"No Upcoming Work \u{1F389}",queriedTasks:t})]})]})}const N=({i:t,text:a,zeroLenText:c,color:i,queriedTasks:r})=>{const s=o.exports.useRef();return p($,{children:[e("h2",{ref:s,className:` ${["text-emerald-600","text-orange-500","text-blue-500"][t]} text-2xl  font-bold font-mono text-center`,children:a}),e("div",{children:r[t].length!==0?r[t].map(y=>e("div",{children:e(G,{task:y,color:i})},y.id)):e("div",{className:"text-center text-lg",children:c})})]})};function Y(){const[t,a]=o.exports.useState(!1),c=o.exports.useRef();return p("div",{ref:c,children:[e(K,{expandState:t,setExpandState:a}),e(O,{expandState:t,setExpandedState:a}),e(X,{}),e(V,{})]})}H.render(e(Z.StrictMode,{children:e(J,{children:e(Y,{})})}),document.getElementById("root"));
